import{i as p,b as g,r as i,j as e,k as b,m,d as x,n as j,f as o,z as N}from"./index-CitSJ8Tc.js";import{M as w}from"./MovieForm-DU2cKiis.js";function M(){const{id:a}=p(),r=g(),[t,u]=i.useState(null),[h,f]=i.useState(!0),[n,c]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const s=m(x,"movies",a),l=await j(s);l.exists()?u({id:l.id,...l.data()}):(o.error("Movie not found",{style:{background:"#ff3b30",color:"#fff"}}),r("/admin/movies"))}catch(s){o.error("Error fetching movie",{style:{background:"#ff3b30",color:"#fff"}}),console.error(s),r("/admin/movies")}finally{f(!1)}})()},[a,r]);const v=async d=>{if(a){c(!0);try{const s=m(x,"movies",a);await N(s,d),o.success("Movie updated successfully!",{style:{background:"#333",color:"#fff"}}),r("/admin/movies")}catch(s){o.error("Error updating movie",{style:{background:"#ff3b30",color:"#fff"}}),console.error(s)}finally{c(!1)}}};return h?e.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{size:"lg"}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"Loading movie details..."})]})}):t?e.jsxs("div",{className:"min-h-screen bg-transparent",children:[e.jsx("header",{className:"bg-transparent borde-b border-neutral-200",children:e.jsx("div",{className:"container mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>r("/admin/movies"),className:"flex items-center text-neutral-100 hover:text-neutral-300 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),e.jsx("div",{className:"w-24"})," "]})})}),e.jsx("main",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-10 text-center",children:[e.jsx("h2",{className:"text-3xl font-semibold text-neutral-100 mb-2",children:t.title}),e.jsx("p",{className:"text-lg text-neutral-300",children:"Update the details for this movie listing"})]}),e.jsxs("div",{className:"bg-neutral-950 rounded-2xl shadow-sm overflow-hidden border border-neutral-700",children:[e.jsxs("div",{className:"bg-neutral-950 px-8 py-5 border-b border-neutral-700",children:[e.jsx("h3",{className:"text-xl font-medium text-neutral-100",children:"Movie Information"}),e.jsx("p",{className:"text-sm text-neutral-300 mt-1",children:"Update the fields you want to change"})]}),e.jsx("div",{className:"p-8",children:e.jsx(w,{onSubmit:v,loading:n,initialValues:{title:t.title,description:t.description,posterUrl:t.posterUrl,movieBg:t.movieBg||"",genre:t.genre,rating:t.rating,runtime:t.runtime,releaseYear:t.releaseYear,ticketPrice:t.ticketPrice,showtimes:t.showtimes||["10:00 AM","1:00 PM","4:00 PM","7:00 PM","10:00 PM"]}})}),e.jsx("div",{className:"bg-neutral-950 px-8 py-5 borde-t border-neutral-100 flex justify-end",children:e.jsx("button",{type:"submit",form:"movie-form",disabled:n,className:`px-6 py-3 rounded-full text-white font-medium transition-colors ${n?"bg-neutral-400":"bg-neutral-900 hover:bg-neutral-800"}`,children:n?e.jsxs("span",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Save Changes"})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-transparent flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 bg-neutral-900 rounded-2xl shadow-sm borde border-neutral-100 max-w-md",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-neutral-100",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-neutral-100",children:"Movie not found"}),e.jsx("p",{className:"mt-1 text-neutral-100",children:"The movie you're looking for doesn't exist or may have been removed."}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>r("/admin/movies"),className:"px-4 py-2 bg-black text-white rounded-full text-sm font-medium hover:bg-neutral-800 transition-colors",children:"Back to Movies"})})]})})}export{M as default};
