import{G as g,r as m,j as e,k as v,T as w,q as b,c as A,d as u,o as S,g as M,m as p,n as h}from"./index-CitSJ8Tc.js";import{f}from"./format-CBpsKyOP.js";function B(i){return g({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"circle",attr:{fill:"#F44336",cx:"24",cy:"24",r:"21"},child:[]},{tag:"polygon",attr:{fill:"#FFCA28",points:"24,11 27.9,18.9 36.6,20.2 30.3,26.3 31.8,35 24,30.9 16.2,35 17.7,26.3 11.4,20.2 20.1,18.9"},child:[]}]})(i)}function C(){const[i,j]=m.useState([]),[y,N]=m.useState(!0);return m.useEffect(()=>{(async()=>{try{const r=b(A(u,"bookings"),S("createdAt","desc")),x=await M(r),d=[];for(const c of x.docs){const n=c.data(),o=p(u,"movies",n.movieId),l=await h(o),s=p(u,"users",n.userId),a=await h(s);l.exists()&&a.exists()&&d.push({...n,id:c.id,movie:{id:l.id,...l.data()},user:{id:a.id,...a.data()}})}j(d)}catch(r){console.error("Error fetching bookings:",r)}finally{N(!1)}})()},[]),y?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(v,{size:"lg"})}):i.length===0?e.jsx("div",{className:"h-screen flex justify-center items-center mx-auto px-4 py-8 text-center text-xl font-semibold text-neutral-200",children:"You don't have any booking yet."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-2xl font-semibold text-neutral-100",children:"Manage Bookings"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search bookings...",className:"pl-10 pr-4 py-2 text-xs font-semibold bg-neutral-900 border border-neutral-700 rounded-full text-neutral-100 placeholder-neutral-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("svg",{className:"absolute left-3 top-[9px] h-4 w-4 text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("select",{className:"bg-neutral-900 hover:bg-neutral-800 border border-neutral-800 text-neutral-300 hover:text-neutral-100 text-xs font-semibold rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",children:[e.jsx("option",{children:"Filter by status"}),e.jsx("option",{children:"Confirmed"}),e.jsx("option",{children:"Pending"}),e.jsx("option",{children:"Cancelled"})]})]})]}),e.jsx("div",{className:"bg-neutral-900 rounded-xl shadow-lg overflow-hidden border border-neutral-800",children:e.jsxs("table",{className:"min-w-full divide-y divide-neutral-800",children:[e.jsx("thead",{className:"bg-neutral-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Movie"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Date & Time"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Seats"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-neutral-200 tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-center text-xs font-medium text-neutral-200 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-neutral-900 divide-y divide-neutral-800",children:i.map(t=>{var r,x,d,c,n,o,l;return e.jsxs("tr",{className:"hover:bg-neutral-750 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-md overflow-hidden",children:e.jsx("img",{className:"h-full w-full object-cover",src:((r=t.movie)==null?void 0:r.posterUrl)||"/placeholder-movie.jpg",alt:((x=t.movie)==null?void 0:x.title)||"Movie poster",onError:s=>{s.target.src="/placeholder-movie.jpg"}})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-neutral-100",children:((d=t.movie)==null?void 0:d.title)||"N/A"}),e.jsxs("div",{className:"text-xs text-neutral-400 inline-flex items-center gap-1",children:[e.jsx(B,{})," ",((c=t.movie)==null?void 0:c.rating)||"N/A"]})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-neutral-300",children:((n=t.user)==null?void 0:n.name)||"N/A"}),e.jsx("div",{className:"text-xs text-neutral-400",children:((o=t.user)==null?void 0:o.email)||"N/A"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-neutral-300",children:t.date instanceof w?f(t.date.toDate(),"MMM dd, yyyy h:mm a"):typeof t.date=="string"?f(new Date(t.date),"MMM dd, yyyy h:mm a"):"Unknown"}),e.jsx("div",{className:"text-xs text-neutral-500",children:t.time||"Unknown"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap max-w-[120px]",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:Array.isArray(t.seats)&&t.seats.length>0?t.seats.map((s,a)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-700 text-neutral-300 rounded",children:s.trim()},a)):typeof t.seats=="string"&&t.seats.trim().length>0?t.seats.split(",").map((s,a)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-neutral-700 text-neutral-300 rounded",children:s.trim()},a)):e.jsx("span",{className:"text-xs text-neutral-500",children:"N/A"})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-neutral-100",children:["$",((l=t.totalPrice)==null?void 0:l.toFixed(2))??"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="confirmed"?"bg-green-900/30 text-green-300":t.status==="cancelled"?"bg-red-900/30 text-red-300":"bg-yellow-900/30 text-yellow-300"}`,children:t.status?t.status.charAt(0).toUpperCase()+t.status.slice(1):"Unknown"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"mr-4 rounded-full py-1.5 px-3 bg-neutral-100 text-neutral-800 hover:bg-neutral-800 hover:text-neutral-100 font-semibold text-xs",children:"Edit"}),e.jsx("button",{className:"py-1.5 rounded-full px-3 bg-neutral-100 text-neutral-800 hover:bg-neutral-800 hover:text-neutral-100 font-semibold text-xs",children:"Cancel"})]})]},t.id)})})]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-neutral-400",children:["Showing ",e.jsx("span",{className:"font-medium",children:"1"})," to ",e.jsx("span",{className:"font-medium",children:"10"})," of"," ",e.jsx("span",{className:"font-medium",children:i.length})," bookings"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"px-3 py-1 rounded-md bg-neutral-800 text-neutral-400 border border-neutral-700 hover:bg-neutral-700 disabled:opacity-50",disabled:!0,children:"Previous"}),e.jsx("button",{className:"px-3 py-1 rounded-md bg-neutral-800 text-neutral-400 border border-neutral-700 hover:bg-neutral-700",children:"Next"})]})]})]})}export{C as default};
