import{r as l,j as e,k as j,L as n,g as b,c as v,d as h,f as i,C as N,m as w}from"./index-CitSJ8Tc.js";import{F as g}from"./ArrowPathIcon-CKd1Gc49.js";import{F as p}from"./PlusIcon-fyuqFdwF.js";function D(){const[a,o]=l.useState([]),[d,c]=l.useState(!0),[x,m]=l.useState(null),u=async()=>{try{c(!0);const t=await b(v(h,"movies")),s=[];t.forEach(r=>{s.push({id:r.id,...r.data()})}),o(s)}catch(t){i.error("Error fetching movies"),console.error(t)}finally{c(!1)}};l.useEffect(()=>{u()},[]);const f=async t=>{if(window.confirm("Are you sure you want to delete this movie?"))try{m(t),await N(w(h,"movies",t)),o(a.filter(s=>s.id!==t)),i.success("Movie deleted successfully")}catch(s){i.error("Error deleting movie"),console.error(s)}finally{m(null)}};return d?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(j,{})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-white",children:"Movies"}),e.jsx("p",{className:"text-neutral-400 mt-1",children:"Manage your movie catalog"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:u,className:"flex items-center px-3 py-2 rounded-full bg-neutral-800 hover:bg-neutral-700 text-sm font-medium text-white transition-colors",children:[e.jsx(g,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(n,{to:"/admin/movies/new",className:"flex items-center px-4 py-2 rounded-full bg-blue-600 hover:bg-blue-700 text-sm font-medium text-white transition-colors",children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Add Movie"]})]})]}),e.jsx("div",{className:"bg-neutral-900 rounded-xl shadow-sm border border-neutral-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-neutral-700",children:[e.jsx("thead",{className:"bg-neutral-900",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Movie"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Genre"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-neutral-200 tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-neutral-900 divide-y divide-neutral-700",children:a.map(t=>{var s;return e.jsxs("tr",{className:"hover:bg-neutral-950/50 transition-colors cursor-pointer",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:t.posterUrl,alt:t.title,className:"h-16 w-12 rounded-md object-cover"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-white",children:t.title}),e.jsx("div",{className:"text-sm text-neutral-400",children:t.releaseYear})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.genre.map(r=>e.jsx("span",{className:"px-2 py-1 text-[10px] font-semibold rounded-sm bg-neutral-800 text-neutral-200",children:r},r))})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-[12px] font-semibold text-white",children:["$",(s=t.ticketPrice)==null?void 0:s.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{to:`/admin/movies/edit/${t.id}`,className:"inline-flex items-center px-3 py-1.5 text-xs font-semibold rounded-full bg-neutral-100 hover:bg-neutral-800 text-neutral-900 hover:text-neutral-200 transition-colors",children:"Edit"}),e.jsx("button",{onClick:()=>f(t.id),disabled:x===t.id,className:"inline-flex items-center px-3 py-1.5 text-xs font-semibold rounded-full bg-neutral-100 hover:bg-neutral-800 text-neutral-900 hover:text-neutral-200 transition-colors disabled:opacity-50",children:x===t.id?e.jsxs("span",{className:"flex items-center",children:[e.jsx("span",{className:"mr-1.5",children:"Deleting"}),e.jsx("span",{className:"inline-block h-3 w-3 border-2 border-neutral-400 border-t-transparent rounded-full animate-spin"})]}):"Delete"})]})})]},t.id)})})]})})}),a.length===0&&!d&&e.jsxs("div",{className:"text-center py-12 bg-neutral-800 rounded-xl border border-neutral-700 mt-4",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z"})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-white",children:"No movies found"}),e.jsx("p",{className:"mt-2 text-neutral-400",children:"Add your first movie to get started"}),e.jsxs(n,{to:"/admin/movies/new",className:"mt-6 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Add Movie"]})]})]})}export{D as default};
