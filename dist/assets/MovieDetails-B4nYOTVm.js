import{r as t,u as S,b as L,j as e,a as N,e as k,f as g,h as M,c as F,d as y,s as D,T as R,i as T,k as A,L as j,m as C,n as $,q as U,w as v,l as B,g as P}from"./index-CitSJ8Tc.js";import{F as q,M as z}from"./MovieCard-8YK38v1U.js";import{m}from"./proxy-CCrMFc-w.js";import{F as O}from"./ChevronDownIcon-D-sHIE4E.js";import{F as W}from"./PlusIcon-fyuqFdwF.js";import{F as Z}from"./ArrowPathIcon-CKd1Gc49.js";import{F as G}from"./ArrowRightIcon-CjMFvAfB.js";function I({title:a,titleId:s,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),a?t.createElement("title",{id:s},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const w=t.forwardRef(I);function Y({title:a,titleId:s,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),a?t.createElement("title",{id:s},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const E=t.forwardRef(Y);function V({title:a,titleId:s,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),a?t.createElement("title",{id:s},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"}))}const H=t.forwardRef(V);function J({title:a,titleId:s,...r},i){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":s},r),a?t.createElement("title",{id:s},a):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const K=t.forwardRef(J);function Q({movieId:a,ticketPrice:s}){const{currentUser:r}=S(),[i,d]=t.useState(""),[h,b]=t.useState(""),[o,x]=t.useState(1),[u,l]=t.useState(!1),c=L(),p=async n=>{if(n.preventDefault(),!r){g.error("Please login to book tickets",{style:{background:"rgba(239, 68, 68, 0.9)",color:"#fff",backdropFilter:"blur(10px)"}});return}l(!0);try{await M(F(y,"bookings"),{movieId:a,userId:r.uid,date:R.fromDate(new Date(i)),time:h,seats:o,totalPrice:o*s,createdAt:D(),status:"confirmed"}),g.success("Booking successful!",{style:{background:"rgba(16, 185, 129, 0.9)",color:"#fff",backdropFilter:"blur(10px)"},iconTheme:{primary:"#fff",secondary:"rgba(16, 185, 129, 1)"}}),c("/my-bookings")}catch(f){g.error("Error creating booking",{style:{background:"rgba(239, 68, 68, 0.9)",color:"#fff",backdropFilter:"blur(10px)"}}),console.error(f)}finally{l(!1)}};return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"glass rounded-apple-lg px-4 py-8 sm:px-6 md:px-8 max-w-xl w-full mx-auto backdrop-blur-lg border border-white/10",children:[e.jsxs(m.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-xl sm:text-2xl font-medium text-white mb-6 flex items-center",children:[e.jsx(N,{className:"h-6 w-6 text-primary-DEFAULT mr-3"}),"Reserve Your Experience"]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary block",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-2 text-text-tertiary"}),"Date"]})}),e.jsx("input",{type:"date",required:!0,value:i,onChange:n=>d(n.target.value),className:"input w-full",min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-neutral-400 block",children:e.jsxs("span",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4 text-neutral-400"}),e.jsx("span",{children:"Time"})]})}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{required:!0,value:h,onChange:n=>b(n.target.value),className:"w-full bg-neutral-700 text-text-primary border border-border-DEFAULT rounded-apple-sm px-4 py-2.5 appearance-none focus:outline-none focus:ring-2 focus:ring-primary-DEFAULT transition duration-300 shadow-apple-input",children:[e.jsx("option",{className:"bg-neutral-800 text-text-secondary",value:"",disabled:!0,children:"Select Showtime"}),["10:00 AM","1:00 PM","4:00 PM","7:00 PM","10:00 PM"].map(n=>e.jsx("option",{value:n,className:"bg-neutral-800 text-text-primary",children:n},n))]}),e.jsx("div",{className:"absolute inset-y-0 right-3 flex items-center pointer-events-none",children:e.jsx(O,{className:"h-4 w-4 text-text-tertiary"})})]})]})]}),e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary block",children:e.jsxs("span",{className:"flex items-center",children:[e.jsx(K,{className:"h-4 w-4 mr-2 text-text-tertiary"}),"Number of Guests"]})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>x(Math.max(1,o-1)),className:"p-2 rounded-full bg-neutral-900 border border-neutral-800 text-text-secondary hover:bg-background-DEFAULT transition-colors",disabled:o<=1,children:e.jsx(H,{className:"h-4 w-4"})}),e.jsx("span",{className:"text-lg font-medium text-white w-10 min-w-[2.5rem] text-center",children:o}),e.jsx("button",{type:"button",onClick:()=>x(Math.min(10,o+1)),className:"p-2 rounded-full bg-neutral-900 border border-neutral-800 text-text-secondary hover:bg-background-DEFAULT transition-colors",disabled:o>=10,children:e.jsx(W,{className:"h-4 w-4"})})]})]}),e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"pt-4 border-t border-border-DEFAULT",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-text-secondary",children:"Total"}),e.jsxs("span",{className:"text-2xl font-semibold text-white",children:["$",(o*s).toFixed(2)]})]})}),e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:e.jsxs("button",{type:"submit",disabled:u,className:"w-full btn-primary mt-6 group relative overflow-hidden px-4 py-3 sm:py-3.5",children:[e.jsx("span",{className:"relative z-10 flex items-center justify-center",children:u?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"h-5 w-5 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:["Confirm Reservation",e.jsx(G,{className:"h-5 w-5 ml-2 transition-transform group-hover:translate-x-1"})]})}),e.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-primary-DEFAULT to-primary-dark opacity-0 group-hover:opacity-100 transition-opacity rounded-full"})]})})]})]})}async function X(a,s){try{const r=U(F(y,"movies"),v("genre","array-contains-any",s.slice(0,2)),v("id","!=",a),B(4));return(await P(r)).docs.map(d=>({id:d.id,...d.data()}))}catch(r){return console.error("Error fetching related movies:",r),[]}}function le(){var u;const{id:a}=T(),[s,r]=t.useState(null),[i,d]=t.useState([]),[h,b]=t.useState(!0),[o,x]=t.useState("details");return t.useEffect(()=>{(async()=>{try{const c=C(y,"movies",a),p=await $(c);if(p.exists()){const n={id:p.id,...p.data()};r(n);const f=await X(n.id,n.genre);d(f)}}catch(c){console.error("Error fetching data:",c)}finally{b(!1)}})()},[a]),h?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-neutral-900",children:e.jsx(A,{size:"lg"})}):s?e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"bg-background-DEFAULT bg-apple-dark text-white min-h-screen",children:[e.jsxs("div",{className:"relative h-64 sm:h-80 md:h-96 w-full overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-neutral-900 via-neutral-900/70 to-transparent z-10"}),e.jsx("img",{src:s.movieBg||"/default-backdrop.jpg",alt:s.title,className:"w-full h-full object-cover object-center",loading:"eager"}),e.jsx("div",{className:"absolute top-4 sm:top-6 left-4 sm:left-6 z-20",children:e.jsxs(j,{to:"/movies",className:"flex items-center gap-1 bg-neutral-950/80 hover:bg-neutral-950/80 backdrop-blur-sm px-3 sm:px-4 py-1 sm:py-2 rounded-full transition-all text-xs sm:text-sm",children:[e.jsx(w,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"font-medium sm:font-semibold",children:"Back to Movies"})]})})]}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 -mt-16 sm:-mt-20 relative z-10",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 md:gap-8",children:[e.jsxs("div",{className:"w-full lg:w-1/3",children:[e.jsxs(m.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"relative aspect-[2/3] sm:aspect-[3/4] rounded-xl overflow-hidden shadow-2xl border-2 border-neutral-700 mx-auto max-w-xs sm:max-w-none",children:[e.jsx("img",{src:s.posterUrl,alt:s.title,className:"w-full h-full object-cover",onError:l=>{l.target.src="/placeholder-movie.jpg"}}),e.jsxs("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4 bg-yellow-500 text-neutral-900 px-2 py-0.5 sm:px-3 sm:py-1 rounded-full flex items-center font-bold text-xs sm:text-sm",children:[e.jsx(q,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-0.5 sm:mr-1"}),s.rating]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 bg-neutral-800 rounded-xl p-4 sm:p-6 md:p-8",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3 md:space-y-4 text-sm sm:text-base",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(E,{className:"h-4 w-4 sm:h-5 sm:w-5 text-neutral-400"}),e.jsxs("span",{children:[s.runtime," min"]})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(k,{className:"h-4 w-4 sm:h-5 sm:w-5 text-neutral-400"}),e.jsx("span",{children:s.releaseYear})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx(N,{className:"h-4 w-4 sm:h-5 sm:w-5 text-neutral-400"}),e.jsxs("span",{children:["$",s.ticketPrice.toFixed(2)]})]})]}),e.jsxs("div",{className:"mt-4 sm:mt-6",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-neutral-400 mb-1 sm:mb-2",children:"GENRES"}),e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:s.genre.map(l=>e.jsx("span",{className:"px-2 py-0.5 sm:px-3 sm:py-1 bg-neutral-700 rounded-full text-xs sm:text-sm",children:l},l))})]})]})]}),e.jsx("div",{className:"w-full lg:w-2/3",children:e.jsxs(m.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[e.jsx("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-1 sm:mb-2",children:s.title}),e.jsx("div",{className:"border-b border-neutral-700 mb-4 sm:mb-6",children:e.jsxs("nav",{className:"flex space-x-4 sm:space-x-8",children:[e.jsx("button",{onClick:()=>x("details"),className:`py-2 sm:py-3 md:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm ${o==="details"?"border-blue-600 text-blue-600":"border-transparent text-neutral-400 hover:text-neutral-300"}`,children:"Details"}),e.jsx("button",{onClick:()=>x("showtimes"),className:`py-2 sm:py-3 md:py-4 px-1 border-b-2 font-medium text-xs sm:text-sm ${o==="showtimes"?"border-blue-600 text-blue-600":"border-transparent text-neutral-400 hover:text-neutral-300"}`,children:"Showtimes"})]})}),e.jsx("div",{className:"mb-4 sm:mb-6 md:mb-8",children:o==="details"?e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2 sm:mb-3 md:mb-4",children:"Synopsis"}),e.jsx("p",{className:"text-neutral-200 text-xs sm:text-sm font-medium leading-relaxed sm:leading-loose",children:s.description})]}):e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-2 sm:mb-3 md:mb-4",children:"Available Showtimes"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 sm:gap-3 md:gap-4",children:(u=s.showtimes)==null?void 0:u.map((l,c)=>e.jsxs("button",{className:"bg-neutral-800 hover:bg-neutral-700 border border-neutral-700 rounded-lg p-2 sm:p-3 md:p-4 text-center transition-colors text-sm sm:text-base",children:[e.jsx("div",{className:"font-medium",children:l}),e.jsx("div",{className:"text-xs sm:text-sm text-neutral-400 mt-0.5 sm:mt-1",children:"Standard"})]},c))})]})}),e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"bg-neutral-800 rounded-xl p-4 sm:p-5 md:p-6 shadow-lg",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold mb-4 sm:mb-5 md:mb-6",children:"Book Tickets"}),e.jsx(Q,{movieId:s.id,ticketPrice:s.ticketPrice})]})]})})]}),e.jsxs(m.section,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"my-8 sm:my-12 md:my-16",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-end gap-2 mb-4 sm:mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"You Might Also Like"}),e.jsxs(j,{to:"/movies",className:"text-blue-600 text-xs sm:text-sm font-semibold hover:text-blue-500 flex items-center",children:["View All ",e.jsx(w,{className:"h-4 w-4 sm:h-5 sm:w-5 ml-0.5 sm:ml-1 rotate-180"})]})]}),i.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-6",children:i.map(l=>e.jsx(z,{movie:l},l.id))}):e.jsx("div",{className:"text-center py-6 sm:py-8 text-neutral-400 text-sm sm:text-base",children:"No similar movies found"})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-neutral-900 text-white",children:e.jsxs("div",{className:"text-center p-8 bg-neutral-800 rounded-xl max-w-md",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Movie not found"}),e.jsx("p",{className:"text-neutral-400 mb-6",children:"The movie you're looking for doesn't exist or may have been removed."}),e.jsx(j,{to:"/movies",className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-colors",children:"Browse all movies"})]})})}export{le as default};
